<nz-card
  [nzBodyStyle]="{ padding: 0}"
>
  <div class="title-bar">
    <nz-space class="title">
      <span *nzSpaceItem><span nz-icon nzType="fire" nzTheme="outline"></span></span>
      <span *nzSpaceItem>事件详情</span>
    </nz-space>

    <span style="float: right">
      <button nz-button nzType="primary" nzDanger nzSize="small" (click)="onRemoved()" type="button">删除</button>
    </span>
  </div>

  <form class="content" nz-form [formGroup]="form" (ngSubmit)="onSubmit()">
    <nz-form-item>
      <nz-form-label [nzSpan]="5" nzRequired>实例ID</nz-form-label>
      <nz-form-control [nzSpan]="19">
        <nz-input-number formControlName="iid" [nzMin]="1" [nzMax]="10" [nzStep]="1" (ngModelChange)="onChanged()"></nz-input-number>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="5" nzRequired>名字空间</nz-form-label>
      <nz-form-control [nzSpan]="19">
        <editor-namespace formControlName="ns"></editor-namespace>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="5" nzRequired>代码</nz-form-label>
      <nz-form-control [nzSpan]="19">
        <input nz-input formControlName="code" (ngModelChange)="onChanged()"/>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="5" nzRequired>简体中文描述</nz-form-label>
      <nz-form-control [nzSpan]="19">
        <input nz-input formControlName="descriptionZHCN" (ngModelChange)="onChanged()"/>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="5" nzRequired>繁体中文描述</nz-form-label>
      <nz-form-control [nzSpan]="19">
        <input nz-input formControlName="descriptionZHTW" (ngModelChange)="onChanged()"/>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="5" nzRequired>英文描述</nz-form-label>
      <nz-form-control [nzSpan]="19">
        <input nz-input formControlName="descriptionENUS" (ngModelChange)="onChanged()"/>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="5" nzRequired>参数</nz-form-label>
      <nz-form-control [nzSpan]="19">
        @if (arguments.length > 0) {
          <div formArrayName="arguments">
            @for (item of arguments.controls; track item.controls.argument.value.argument.piid; let i = $index) {
              <div [formGroupName]="i">
                <nz-form-item>
                  <nz-space>
                    <div *nzSpaceItem>
                      <editor-service-action-argument id="arguments{{i}}" formControlName="argument"></editor-service-action-argument>
                    </div>

                    <div *nzSpaceItem>
                      <button nz-button nzType="dashed" nzDanger (click)="removeArgument(item, i)" style="width: 40px" type="button">
                        <span nz-icon nzType="delete"></span>
                      </button>
                    </div>
                  </nz-space>
                </nz-form-item>
              </div>
            }
          </div>

          <button nz-button nzType="dashed" (click)="addArgumentItem()" style="width: 100px" type="button">
            <span nz-icon nzType="plus"></span>
          </button>
        } @else {
          <button nz-button nzType="dashed" (click)="addArgumentItem()" style="width: 100px" type="button">
            <span nz-icon nzType="plus"></span>
          </button>
        }
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control [nzSpan]="19" [nzOffset]="5">
        <button nz-button nzType="primary" [disabled]="!changed" type="submit">保存</button>
      </nz-form-control>
    </nz-form-item>
  </form>
</nz-card>

